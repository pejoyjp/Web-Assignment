<?php$dsn = "mysql:host=localhost;dbname=gap";$username = "root";$password = "";try {    $db = new PDO($dsn, $username, $password);//set up error reporting on server    $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, FALSE);    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);    error_reporting(E_ALL);} catch (PDOException $ex) {//echo "Connection Failure Error is " . $ex->getMessage();// redirect to an error page passing the error message    header("Location:error.php?msg=" . $ex->getMessage());}session_start();$userEmail= $_POST['userEmail'];$pwd = $_POST['pwd'];if ($pwd == "" || $userEmail==""){    echo "please input correct password";    $result["result"] = "false";}else{    login($userEmail,$pwd);}function login($account,$pwd){    global $db;    $query = "SELECT * FROM user where userEmail = '". $account."'";    $statement = $db->prepare($query);    try {        $statement->execute();    } catch (Exception $ex) {    }    $user = $statement->fetchAll();    $statement->closeCursor();    if ($user == null) {        echo "Wrong password";        return "0";    } else {        foreach ($user as $key) {            if ($pwd ==$key['pwd']) {                $_SESSION['userName'] = $key['userSecondName'] .$key['userFirstName'];                $_SESSION['userEmail'] = $key['userEmail'];                $_SESSION['contact'] = $key['phone'];                $_SESSION['userGender'] = $key['gender'];                $_SESSION['dob'] = $key['dob'];                include "profile.php";                return "1";            }        }    }    //echo '登录失败';    return "-1";}