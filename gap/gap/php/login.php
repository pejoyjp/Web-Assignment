<?php$dsn = "mysql:host=localhost;dbname=gap";$username = "root";$password = "";try {    $db = new PDO($dsn, $username, $password);//set up error reporting on server    $db->setAttribute(PDO::ATTR_EMULATE_PREPARES, FALSE);    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);    error_reporting(E_ALL);} catch (PDOException $ex) {//echo "Connection Failure Error is " . $ex->getMessage();// redirect to an error page passing the error message    header("Location:error.php?msg=" . $ex->getMessage());}$userEmail= $_POST['userEmail'];$pwd = $_POST['pwd'];if ($pwd == "" || $userEmail==""){    echo "please input correct password";    $result["result"] = "false";}else{    login2($userEmail,$pwd);}function login($account, $pwd) {    global $db;    $query = "SELECT * FROM user where userEmail = '". $account."'";    $statement = $db->prepare($query);    try {        $statement->execute();    } catch (Exception $ex) {    }    $user = $statement->fetchAll();    $statement->closeCursor();    if ($user == null) {        echo " no account ";        return 0;    }    else {        foreach ($user as $key) {            if ($pwd == $key['pwd']) {                return $key['userEmail'];            }        }        echo "成功";        return 1;    }    echo "shibai";    return "-1";}function login2($account,$pwd){    global $db;    $query = "SELECT * FROM user where userEmail = '". $account."'";    $statement = $db->prepare($query);    try {        $statement->execute();    } catch (Exception $ex) {    }    $user = $statement->fetchAll();    $statement->closeCursor();    if ($user == null) {        echo "没有帐户";        return "0";    } else {        foreach ($user as $key) {            if ($pwd ==$key['pwd']) {                //echo "登录成功";                include "profile.html";                return "1";            }        }    }    //echo '登录失败';    return "-1";}